function Keybind(a){this.savedPressing=[],this.startedToPressTime,this.keyWasPressed=!1,this.completed=!1;var b={key:" ",time:2,draw:{enabled:!1,elID:" ",deg:0,initialColor:"#fff",fillColor:"#888888"},dev:!1,onComplete:function(){console.log("Fire ball!")}};this.options={key:a.key||b.key,time:a.time||b.time,draw:{enabled:a.draw.enabled||b.draw.enabled,elID:a.draw.elID||b.draw.enabled,deg:a.draw.deg||b.draw.deg,initialColor:a.draw.initialColor||b.draw.initialColor,fillColor:a.draw.fillColor||b.draw.fillColor},dev:a.dev||b.dev,onComplete:a.onComplete||b.onComplete};var c=this;if("undefined"==typeof a)console.warn("Warning, can't find any options");else if(a.key||console.warn("Warning, key wasn't selected"),a.time||console.warn("Warning, time wasn't set! the defualt is 5 seconds."),a.draw&&a.draw.enabled&&!document.getElementById(this.options.draw.elID))throw"Error! the draw is set to enabled but couldn't find the element ID '"+this.options.elID+"'";this.options.dev&&(document.getElementById("kb_timer")||this.UI.insertTimerElement()),document.addEventListener("keydown",function(a){a.key==c.options.key&&(c.keyWasPressed||(c.startedToPressTime=new Date,c.keyWasPressed=!0),c.completed||Math.abs((c.startedToPressTime.getTime()-(new Date).getTime())/1e3)>=c.options.time&&(c.options.draw.enabled&&c.UI.fillTheElement(100,c.options.draw),c.completed=!0,c.options.onComplete()),c.options.draw.enabled&&(c.completed||c.UI.fillTheElement(Math.floor(Math.abs((c.startedToPressTime.getTime()-(new Date).getTime())/1e3)/c.options.time*100)+1,c.options.draw),c.options.dev&&c.UI.updateTimer(Math.abs((c.startedToPressTime.getTime()-(new Date).getTime())/1e3))))}),document.addEventListener("keyup",function(a){a.key==c.options.key&&(c.savedPressing.push({key:a.key,timestamp:Math.abs((c.startedToPressTime.getTime()-(new Date).getTime())/1e3)}),c.keyWasPressed=!1,c.completed=!1,c.options.dev&&c.UI.updateTimer(c.savedPressing[c.savedPressing.length-1].timestamp))})}Keybind.prototype.setKey=function(a){this.options.key=a},Keybind.prototype.setTime=function(a){isNaN(a)?console.warn("Warning, setTime wasn't saved as the arg isn't a number, timer value return to default"):this.options.time=a},Keybind.prototype.enableDraw=function(){this.options.draw.enabled=!0},Keybind.prototype.disableDraw=function(){this.options.draw.enabled=!1},Keybind.prototype.setElID=function(a){this.options.draw.elID=a},Keybind.prototype.setDeg=function(a){this.options.draw.deg=a},Keybind.prototype.setInitialColor=function(a){this.options.draw.initialColor=a},Keybind.prototype.setFillColor=function(a){this.options.draw.fillColor=a},Keybind.prototype.enableDev=function(){this.options.dev=!0},Keybind.prototype.disableDev=function(){this.options.dev=!1},Keybind.prototype.setOnCompleteFunction=function(a){this.options.onComplete=a},Keybind.prototype.getKey=function(){return this.options.key},Keybind.prototype.getTime=function(){return this.options.time},Keybind.prototype.isDrawEnabled=function(){return this.options.draw.enabled},Keybind.prototype.getElementId=function(){return this.options.draw.elID},Keybind.prototype.getDeg=function(){return this.options.draw.deg},Keybind.prototype.getInitialColor=function(){return this.options.draw.initialColor},Keybind.prototype.fillColor=function(){return this.options.draw.fillColor},Keybind.prototype.isDev=function(){return this.options.dev},Keybind.prototype.getOnCompleteFunction=function(){return this.options.onComplete()},Keybind.prototype.UI={insertTimerElement:function(){document.getElementsByTagName("body")[0].innerHTML+="<div id='kb_timer'> 0s </div>"},updateTimer:function(a){document.getElementById("kb_timer").innerHTML=Math.round(a)+"s"},fillTheElement:function(a,b){document.getElementById(b.elID).style.background="linear-gradient( "+b.deg+"deg, "+b.initialColor+" "+a+"%, "+b.fillColor+" )"}};